{"ast":null,"code":"import _slicedToArray from \"/Users/adamwolfman/Desktop/roxy/roxy/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/adamwolfman/Desktop/roxy/roxy/src/Shop/CheckoutForm/CheckoutForm.jsx\";\nimport React, { useState } from 'react';\nimport { CardElement, injectStripe } from 'react-stripe-elements';\n\nfunction CheckoutForm({\n  stripe,\n  totalCost\n}) {\n  const _useState = useState('default'),\n        _useState2 = _slicedToArray(_useState, 2),\n        status = _useState2[0],\n        setStatus = _useState2[1];\n\n  let billing_details = {\n    \"address\": {\n      \"city\": null,\n      \"line1\": null,\n      \"postal_code\": \"11111\",\n      \"state\": null\n    },\n    \"email\": null,\n    \"name\": \"Adam Wolfman\"\n  };\n\n  const setDetails = e => {\n    if (e.target.placeholder === \"name\") {\n      billing_details.name = e.target.value;\n    } else if (e.target.placeholder === \"email\") {\n      billing_details.email = e.target.value;\n    } else if (e.target.placeholder === \"city\") {\n      billing_details.address.city = e.target.value;\n    } else if (e.target.placeholder === \"address\") {\n      billing_details.address.line1 = e.target.value;\n    } else if (e.target.placeholder === \"zip code\") {\n      billing_details.address.postal_code = e.target.value;\n    } else if (e.target.placeholder === \"state\") {\n      billing_details.address.state = e.target.value;\n    } // custName = e.target.value;\n\n\n    console.log(billing_details);\n  };\n\n  const submit = async e => {\n    e.preventDefault();\n    console.log(e.target);\n    setStatus('submitting');\n\n    try {\n      let _ref = await stripe.createToken({\n        \"address\": {\n          \"city\": billing_details.address.city,\n          \"line1\": billing_details.address.line1,\n          \"postal_code\": billing_details.address.postal_code,\n          \"state\": billing_details.address.state\n        },\n        \"email\": billing_details.email,\n        \"name\": billing_details.name\n      }),\n          token = _ref.token;\n\n      let response = await fetch('/.netlify/functions/charge', {\n        method: 'POST',\n        body: JSON.stringify({\n          amount: totalCost * 100,\n          token: token.id\n        })\n      });\n      console.log(response);\n\n      if (response.ok) {\n        setStatus('complete');\n      } else {\n        throw new Error('Network response was not ok.');\n      }\n    } catch (err) {\n      setStatus('error');\n    }\n  };\n\n  if (status === 'complete') {\n    return React.createElement(\"div\", {\n      className: \"CheckoutForm-complete\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Payment successful!\");\n  }\n\n  return React.createElement(\"form\", {\n    className: \"CheckoutForm\",\n    onSubmit: submit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Would you like to complete the purchase?\"), React.createElement(\"input\", {\n    className: \"checkout-input\",\n    type: \"text\",\n    placeholder: \"name\",\n    onChange: setDetails,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"checkout-input\",\n    type: \"text\",\n    placeholder: \"address\",\n    onChange: setDetails,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"checkout-city\",\n    type: \"text\",\n    placeholder: \"city\",\n    onChange: setDetails,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"checkout-state\",\n    type: \"text\",\n    placeholder: \"state\",\n    onChange: setDetails,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"checkout-zip\",\n    type: \"text\",\n    placeholder: \"zip code\",\n    onChange: setDetails,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"checkout-input\",\n    type: \"text\",\n    placeholder: \"email\",\n    onChange: setDetails,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(CardElement, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"CheckoutForm-button\",\n    type: \"submit\",\n    disabled: status === 'submitting',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, status === 'submitting' ? 'Submitting' : 'Submit Order'), status === 'error' && React.createElement(\"div\", {\n    className: \"CheckoutForm-error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"Something went wrong.\"));\n}\n\nexport default injectStripe(CheckoutForm);","map":{"version":3,"sources":["/Users/adamwolfman/Desktop/roxy/roxy/src/Shop/CheckoutForm/CheckoutForm.jsx"],"names":["React","useState","CardElement","injectStripe","CheckoutForm","stripe","totalCost","status","setStatus","billing_details","setDetails","e","target","placeholder","name","value","email","address","city","line1","postal_code","state","console","log","submit","preventDefault","createToken","token","response","fetch","method","body","JSON","stringify","amount","id","ok","Error","err"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { CardElement, injectStripe } from 'react-stripe-elements';\n\nfunction CheckoutForm({ stripe, totalCost }) {\n  const [status, setStatus] = useState('default');\n\n  let billing_details = {\n      \"address\": {\n        \"city\": null,\n        \"line1\": null,\n        \"postal_code\": \"11111\",\n        \"state\": null\n      },\n      \"email\": null,\n      \"name\": \"Adam Wolfman\"    \n  }\n\n  const setDetails = (e) => {\n    if(e.target.placeholder === \"name\"){\n      billing_details.name = e.target.value;\n    } else if (e.target.placeholder === \"email\"){\n      billing_details.email = e.target.value;\n    } else if (e.target.placeholder === \"city\"){\n      billing_details.address.city = e.target.value;\n    } else if (e.target.placeholder === \"address\"){\n      billing_details.address.line1 = e.target.value;\n    } else if (e.target.placeholder === \"zip code\"){\n      billing_details.address.postal_code = e.target.value;\n    } else if (e.target.placeholder === \"state\"){\n      billing_details.address.state = e.target.value;\n    }\n    \n    // custName = e.target.value;\n    console.log(billing_details);\n  }\n\n  const submit = async e => {\n    e.preventDefault();\n    console.log(e.target);\n    setStatus('submitting');\n\n    try {\n      let { token } = await stripe.createToken({\n        \"address\": {\n          \"city\": billing_details.address.city,\n          \"line1\": billing_details.address.line1,\n          \"postal_code\": billing_details.address.postal_code,\n          \"state\": billing_details.address.state\n        },\n        \"email\": billing_details.email,\n        \"name\": billing_details.name   \n    });\n\n      let response = await fetch('/.netlify/functions/charge', {\n        method: 'POST',\n        body: JSON.stringify({\n          amount: totalCost * 100,\n          token: token.id,\n        }),\n      });\n\n      console.log(response);\n\n      if (response.ok) {\n        setStatus('complete');\n      } else {\n        throw new Error('Network response was not ok.');\n      }\n    } catch (err) {\n      setStatus('error');\n    }\n  };\n\n  if (status === 'complete') {\n    return <div className=\"CheckoutForm-complete\">Payment successful!</div>;\n  }\n\n  return (\n    <form className=\"CheckoutForm\" onSubmit={submit}>\n      <h4>Would you like to complete the purchase?</h4>\n      <input className=\"checkout-input\" type=\"text\" placeholder=\"name\" onChange={setDetails}/><br/>\n      <input className=\"checkout-input\" type=\"text\" placeholder=\"address\" onChange={setDetails}/><br/>\n      <input className=\"checkout-city\" type=\"text\" placeholder=\"city\" onChange={setDetails}/>\n      <input className=\"checkout-state\" type=\"text\" placeholder=\"state\" onChange={setDetails}/>\n      <input className=\"checkout-zip\" type=\"text\" placeholder=\"zip code\" onChange={setDetails}/><br/>\n      <input className=\"checkout-input\" type=\"text\" placeholder=\"email\" onChange={setDetails}/>\n      <CardElement />\n      <button\n        className=\"CheckoutForm-button\"\n        type=\"submit\"\n        disabled={status === 'submitting'}\n      >\n        {status === 'submitting' ? 'Submitting' : 'Submit Order'}\n      </button>\n      {status === 'error' && (\n        <div className=\"CheckoutForm-error\">Something went wrong.</div>\n      )}\n    </form>\n  );\n}\n\nexport default injectStripe(CheckoutForm);"]},"metadata":{},"sourceType":"module"}